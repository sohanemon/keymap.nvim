#!/bin/sh

cd "$(dirname "$0")/.." || exit 1

# Check if Lua is available
if ! command -v lua >/dev/null 2>&1; then
  echo "Lua not found, skipping tests"
  exit 0
fi

# Run tests
echo "Running tests..."
lua tests/run_tests.lua
EXIT_CODE=$?

if [ $EXIT_CODE -ne 0 ]; then
  echo "Tests failed! Commit aborted."
  exit 1
fi

echo "Tests passed!"
exit 0
